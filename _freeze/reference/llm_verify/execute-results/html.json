{
  "hash": "97f0d800054f6a0306447ef29699773e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Verify if a statement about the text is true or not\"\nexecute:\n  eval: true\n  freeze: true\n---\n\n\n\n[R/llm-verify.R](https://github.com/mlverse/mall/blob/main/r/R/llm-verify.R)\n\n## llm_verify\n\n## Description\n Use a Large Language Model (LLM) to see if something is true or not based the provided text \n\n\n## Usage\n```r\n \nllm_verify( \n  .data, \n  col, \n  what, \n  yes_no = factor(c(1, 0)), \n  pred_name = \".verify\", \n  additional_prompt = \"\" \n) \n \nllm_vec_verify( \n  x, \n  what, \n  yes_no = factor(c(1, 0)), \n  additional_prompt = \"\", \n  preview = FALSE \n) \n```\n\n## Arguments\n|Arguments|Description|\n|---|---|\n| .data | A `data.frame` or `tbl` object that contains the text to be analyzed |\n| col | The name of the field to analyze, supports `tidy-eval` |\n| what | The statement or question that needs to be verified against the provided text |\n| yes_no | A size 2 vector that specifies the expected output. It is positional. The first item is expected to be value to return if the statement about the provided text is true, and the second if it is not. Defaults to: `factor(c(1, 0))` |\n| pred_name | A character vector with the name of the new column where the prediction will be placed |\n| additional_prompt | Inserts this text into the prompt sent to the LLM |\n| x | A vector that contains the text to be analyzed |\n| preview | It returns the R call that would have been used to run the prediction. It only returns the first record in `x`. Defaults to `FALSE` Applies to vector function only. |\n\n\n\n## Value\n `llm_verify` returns a `data.frame` or `tbl` object. `llm_vec_verify` returns a vector that is the same length as `x`. \n\n\n## Examples\n\n::: {.cell}\n\n```{.r .cell-code}\n \n \nlibrary(mall) \n \ndata(\"reviews\") \n \nllm_use(\"ollama\", \"llama3.2\", seed = 100, .silent = TRUE) \n \n# By default it will return 1 for 'true', and 0 for 'false', \n# the new column will be a factor type \nllm_verify(reviews, review, \"is the customer happy\") \n#> # A tibble: 3 × 2\n#>   review                                                                 .verify\n#>   <chr>                                                                  <fct>  \n#> 1 This has been the best TV I've ever used. Great screen, and sound.     1      \n#> 2 I regret buying this laptop. It is too slow and the keyboard is too n… 0      \n#> 3 Not sure how to feel about my new washing machine. Great color, but h… 0\n \n# The yes_no argument can be modified to return a different response \n# than 1 or 0. First position will be 'true' and second, 'false' \nllm_verify(reviews, review, \"is the customer happy\", c(\"y\", \"n\")) \n#> # A tibble: 3 × 2\n#>   review                                                                 .verify\n#>   <chr>                                                                  <chr>  \n#> 1 This has been the best TV I've ever used. Great screen, and sound.     y      \n#> 2 I regret buying this laptop. It is too slow and the keyboard is too n… n      \n#> 3 Not sure how to feel about my new washing machine. Great color, but h… n\n \n# Number can also be used, this would be in the case that you wish to match \n# the output values of existing predictions \nllm_verify(reviews, review, \"is the customer happy\", c(2, 1)) \n#> # A tibble: 3 × 2\n#>   review                                                                 .verify\n#>   <chr>                                                                    <dbl>\n#> 1 This has been the best TV I've ever used. Great screen, and sound.           2\n#> 2 I regret buying this laptop. It is too slow and the keyboard is too n…       1\n#> 3 Not sure how to feel about my new washing machine. Great color, but h…       1\n```\n:::\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}